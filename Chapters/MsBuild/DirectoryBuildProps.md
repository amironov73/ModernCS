### Directory.Build.props

В MsBuild предусмотрена пара «хуков», позволяющих довольно удобно настраивать проекты. Когда MsBuild начинает загружать файл проекта, она сначала ищет в текущей директории файл с именем `Directory.Build.props`. Если не находит здесь — переходит в родительскую директорию и ищет там, и так, пока не найдет либо пока не дойдет до корневой директории. Найдя файл, она просто импортирует его (по сути у нас в начале каждого файла проекта есть невидимая строчка "Import Directory.Build.props". Это позволяет вынести в один файл все настройки, которые мы хотели быть сделать общими для проектов в данной директории. Например, мы можем сочинить файл такого содержания:

```msbuild
<Project>
 
  <PropertyGroup>
    <TargetFramework>net5.0</TargetFramework>
    <IsPackable>false</IsPackable>
  </PropertyGroup>
 
  <ItemGroup>
    <ProjectReference Include="Libs\AM.Core5\AM.Core5.csproj" />
  </ItemGroup>
 
  <ItemGroup>
    <PackageReference Include="System.CommandLine" Version="2.0.0-beta1" />
  </ItemGroup>
  
</Project>
```

и затем переключать версию библиотеки `System.CommandLine` в одном месте, не лазя по десяткам файлов проектов. Удобно!

Главный недостаток этого подхода — то, что он срабатывает ровно один раз. Встретив этот файл, MsBuild даже не пытается заглядывать в родительские директории. Так что ссылки на «вышестоящие файлы» придется делать вручную.

Второй, аналогичный, файл называется `Directory.Build.targets`. Он ищется и загружается по той же системе, только после разбора последней строки в файле проекта. В остальном — все то же самое.
